---
doc_type: "pattern-logic"
status: "draft"
depends:
  contracts:
    - "individual-development-constraints"
    - "system-decomposition"
  produces:
    - "data-access"
---

# データアクセス

## 前提

データの整合性を保つための手法と、暗号化・アクセス制御の仕組みを決定する。システム分割とアーキテクチャスタイルを基にデータアクセス方針を設計する。

### 既存決定事項

<!-- PREMISE_BEGIN: individual-development-constraints -->

- **個人リソース制約**
  - 限られた予算（月 1000 円）と時間（週 7 時間）に適応した効率的な開発手法を選択する
  - 自宅サーバーと Cloudflare サービスの最大限活用により追加コストを最小化する
  - シンプルで理解しやすい構造、一人で管理可能な複雑度に制限する
- **個人開発方針**
  - 学習目的での技術採用は許容する
  - 複雑なコードレビュー・品質標準・セキュリティ監査等の配慮は不要である
  - 他者からの評価や社会的な標準に合わせる必要がない

<!-- PREMISE_END: individual-development-constraints -->

<!-- PREMISE_BEGIN: system-decomposition -->

**単一システム構成**を採用する。

外部依存の重い処理(LLM 協働・記事取得)については、将来的にマイクロサービス化する可能性を残すが、初期実装は統合構成とする。

<!-- PREMISE_END: system-decomposition -->

## 論理

### データアクセス判断基準

CogitoWeave の制約条件:

1. **一人開発**: 排他制御・競合状態が発生しない
2. **個人使用**: 複雑なアクセス制御・権限管理が不要
3. **開発効率重視**: パフォーマンスより開発速度を優先

### データアクセス方式選択

**アクセス方式**: ORM 経由

- 理由: 一人開発なので複雑なトランザクション考慮が不要
- 開発効率を重視した選択

**処理方式**:

- バックエンド内部: 同期処理（排他制御不要）
- フロントエンド/バックエンド間: 非同期通信（当然）

**データ整合性**:

- トランザクション: 一人開発なので考慮不要
- 関連データ削除: 参照制約による削除不可制御

**アクセス制御**:

- 認証・権限管理: 不要（個人使用）
- 外部保護: Cloudflare による保護のみ

**キャッシュ戦略**:

- 静的ファイルキャッシュ: Cloudflare 活用の可能性

## 結論

<!-- FOUNDATION_BEGIN: data-access -->

**ORM 経由・同期処理・シンプル整合性管理**を採用する。

- データアクセス: ORM 経由
- 処理方式: バックエンド内は同期処理
- トランザクション: 考慮不要
- データ整合性: 参照制約による関連データ削除制限
- アクセス制御: 不要（Cloudflare 保護のみ）

<!-- FOUNDATION_END: data-access -->

### 一人開発最適化

1. **開発効率重視**: ORM 活用による開発速度向上
2. **複雑性排除**: 排他制御・トランザクション管理の省略
3. **シンプル設計**: 必要最小限の機能に集中
