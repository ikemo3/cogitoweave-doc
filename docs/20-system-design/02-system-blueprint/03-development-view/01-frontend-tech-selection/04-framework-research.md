---
doc_type: "pattern-research"
status: "draft"
depends:
  contracts:
    - "app-structure-evaluation"
    - "performance-optimization-policy"
    - "component-granularity-design"
    - "technology-selection-criteria"
  produces:
    - "framework-research"
---

# フレームワーク調査

## 前提

<!-- PREMISE_BEGIN: app-structure-evaluation -->

CogitoWeave のアプリケーション構造として以下を採用する。

- 基本構造は MPA または SPA のいずれも可能とする。
  - 画面間状態共有が不要で、各画面の独立性を重視するため、どちらの技術でも要件を満たせる。
- 概念間移動の高速化を最優先とする。
  - 概念ページ読み込み最優先要件を満たすため、技術選択に応じて最適な実装を行う。
- 各画面の独立性を確保する。
  - MPA 選択時は別ページ遷移、SPA 選択時は状態管理の分離により実現する。
- 3 画面という小規模構成を活かしたシンプルな設計とする。
  - 一人開発制約下での理解しやすさと保守性を維持するため。

<!-- PREMISE_END: app-structure-evaluation -->

<!-- PREMISE_BEGIN: performance-optimization-policy -->

CogitoWeave のパフォーマンス最適化方針として以下を採用する。

- 概念ページ読み込み 1.5 秒以内を最優先とする。
  - 最も頻繁な日常操作の快適性確保を最重要視する。
- 初回ロードの遅さは許容し、ページ遷移の高速性を重視する。
  - CSR 特性を活かした継続利用の効率性を優先する。
- 複雑なパフォーマンス最適化は実装しない。
  - 軽量なコンポーネント指向アーキテクチャにより設計段階で最適化を行う。
- ツリーシェイキング対応ライブラリを優先する。
  - 元々軽量で最適化しやすい技術を選択し、開発効率と軽量性を両立する。

<!-- PREMISE_END: performance-optimization-policy -->

<!-- PREMISE_BEGIN: component-granularity-design -->

CogitoWeave の UI コンポーネント責務として、階層的な粒度設計による軽量なコンポーネント指向アーキテクチャを採用する。

- **最小粒度**: ボタン・入力フィールド・ラベル等の基本 UI 要素レベル
  - 単一責務の原則により、一つの操作または表示に特化する。
- **統合粒度**: カード・パネル・モーダル等の機能単位レベル
  - 複数の基本要素を組み合わせた意味のある機能を提供する。
- **階層アプローチ**: 統合コンポーネント内で基本コンポーネントを組み合わせる
  - 外部からは統合コンポーネントとして使用し、内部実装では基本コンポーネントで構成する。

<!-- PREMISE_END: component-granularity-design -->

<!-- PREMISE_BEGIN: technology-selection-criteria -->

- **最適な技術を選ぶ**: ただし大差ないときは慣れた技術やメジャーなものを選ぶ
- **外部ライブラリは適度に制限**: 依存を少なくして、自分でコントロールできる範囲を広げる
- **監視は最小限**: システムが生きているかどうかを確認する程度の基本的な監視のみ
- **ログは少なめ**: テストでしっかり品質を保つので、ログに頼りすぎない

<!-- PREMISE_END: technology-selection-criteria -->

## 調査

### 情報源

State of JS 2024 のフレームワーク調査結果を分析する。
<https://2024.stateofjs.com/en-US/libraries/front-end-frameworks/>

### 主要フレームワークの現状

#### 使用率 (Usage)

- React: 84% → 82% (高使用率、やや減少)
- Vue: 50% → 51% (中使用率、安定成長)
- Svelte: 25% → 26% (低使用率、微増)
- Preact: 13% → 13% (低使用率、安定)
- Solid: 8% → 9% (低使用率、微増)

#### 満足度 (Satisfaction)

- Solid: 86% → 90% (最高満足度、上昇)
- Svelte: 86% → 88% (高満足度、上昇)
- Vue: 75% → 87% (高満足度、大幅上昇)
- Preact: 66% → 80% (中満足度、大幅上昇)
- React: 76% → 75% (中満足度、微減)

#### 関心度 (Interest)

- Svelte: 68% → 65% (高関心、やや減少)
- Solid: 56% → 54% (中関心、やや減少)
- Vue: 50% → 48% (中関心、やや減少)
- React: 42% → 34% (中関心、減少)
- Preact: 34% → 24% (低関心、減少)

#### 期待値と現実のギャップ (Appreciation)

- Preact: 32% → 55% (期待より大幅に良い)
- React: 34% → 40% (期待より良い)
- Vue: 24% → 38% (期待より良い)
- Solid: 30% → 35% (期待より良い)
- Svelte: 17% → 22% (期待より少し良い)

#### 全体的評判 (Positivity)

- Svelte: 73% → 72% (高評判、安定)
- Vue: 63% → 70% (高評判、上昇)
- React: 71% → 69% (高評判、微減)
- Solid: 60% → 55% (中評判、下降)
- Preact: 39% → 33% (低評判、下降)

## 論理

State of JS 2024 のデータから、フレームワークの候補を以下の論理で評価する。

MPA または SPA のいずれの構造でも適用可能で、軽量なコンポーネント指向アーキテクチャに適合する候補として、階層的なコンポーネント設計を支援し、軽量性と柔軟性を兼ね備えたフレームワークが有力である。

満足度が高く、期待値と現実のギャップ（Appreciation）がプラスのフレームワークは、実際に使用した開発者が期待以上の価値を感じており、一人開発での学習と採用における価値が高い。

概念ページの読み込みを 1.5 秒以内にする要件により、軽量で高速なフレームワークを優先する。軽量なコンポーネント指向アーキテクチャの階層的粒度設計（最小粒度から統合粒度まで）を効率的に支援し、ツリーシェイキングによる最適化が容易なフレームワークが適している。

一人開発の制約により、学習曲線が緩やかで、コミュニティサポートが充実しているフレームワークを選択する必要がある。使用率が極端に低いフレームワークは情報不足のリスクがあるため、技術的に大差がない場合は使用率も考慮する。

CSR の特性を活かした継続利用の効率性を重視する要件により、CSR での動作が安定しているフレームワークが必要である。コンポーネントの単一責務原則を支援し、基本 UI 要素から統合機能まで段階的に組み立てられる設計パターンに適合するフレームワークを選択する。React 19 では CSR における Suspense の[強制 300ms 遅延バグ](https://github.com/facebook/react/issues/31819)が発生しており、概念ページの読み込みを 1.5 秒以内にする要件に深刻な影響を与える可能性がある。

## 結論

<!-- GLOBAL_CONCLUSION_BEGIN: framework-research -->

State of JS 2024 のデータに基づくフレームワーク候補の調査結果は以下の通りである。

### フレームワーク最優先候補

- **Preact**: 軽量な React 代替として満足度 80%、期待値ギャップ 55%（最高）を記録し、React エコシステムを活用できる。
- **Vue**: バランスの取れたフレームワークとして満足度 87%（大幅上昇）、使用率 51%（適度）を示し、学習曲線も緩やかである。
- **Svelte**: 高満足度 88% を誇り、コンパイル時最適化による軽量性を提供するが、関心度は減少傾向にある。

### フレームワーク次点候補

- **Solid**: 最高満足度 90%、期待値ギャップ 35% を記録する革新的なフレームワークだが、使用率 9%で情報が限定的である。
- **React 18**: 使用率 82%で情報は豊富であり、React 19 の CSR における Suspense 遅延バグを回避できる安定版として選択可能である。

### フレームワーク要注意候補

- **React 19**: React の最新版だが CSR における Suspense の[強制 300ms 遅延バグ](https://github.com/facebook/react/issues/31819)が発生し、概念ページの読み込み要件に深刻な影響を与える。

軽量なコンポーネント指向アーキテクチャ、一人開発の制約、パフォーマンスの要件を総合すると、Preact、Vue、Svelte が最有力の候補として浮上し、Solid と React 18 が次点の候補、React 19 が要注意の候補となる。

<!-- GLOBAL_CONCLUSION_END: framework-research -->
