---
doc_type: "pattern-choice"
category: "frontend-technology"
status: "draft"
depends:
  contracts:
    - "foundation-tech-selection"
  produces:
    - "graph-visualization-selection"
---

# グラフ可視化選択

## 概要

空間配置画面での概念間関係可視化に必要なグラフ可視化ライブラリを選択する。基盤技術選択で決定された技術スタックを前提として、CogitoWeave の思考支援要件に最適な可視化技術を決定する。

### 前提

<!-- PREMISE_BEGIN: foundation-tech-selection -->

選定技術スタック:

- フレームワーク: Solid + TanStack Router
- ビルドツール: Vite
- CSS 手法: Tailwind CSS + CSS Modules ハイブリッド構成
- テスト: Vitest + Testing Library + Playwright
- UI コンポーネント: Tailwind CSS ベースのカスタム実装

個人最適化による柔軟性と技術選択基準を総合した結果、シンプルで直接的な操作体系を提供する技術スタックを採用する。

<!-- PREMISE_END: foundation-tech-selection -->

## 選択肢と判断基準

空間配置画面での概念間関係可視化に必要なグラフ可視化ライブラリの選択を行う。基盤技術選択で決定された Solid ベースの技術スタックを前提として、CogitoWeave の思考支援要件に最適な可視化技術を決定する。

### 判断基準

- 概念間関係の表現能力 (優先度高) - ネットワーク図・力学シミュレーションへの適合性
- Solid との統合性 (優先度高) - 選択済みフレームワークとの相性
- インタラクティブ性 - ドラッグ&ドロップ、動的配置への対応
- 習得しやすさ・保守性 - 一人開発制約への適合性
- パフォーマンス - 数千の概念を扱う際の動作性能

### 選択肢

- D3: データ可視化の標準ライブラリ、force simulation によるネットワーク図が得意
- Three.js: 3D 可視化の王者、WebGL ベースの高性能レンダリング
- Chart.js: 軽量なチャートライブラリ、基本的なグラフ描画に特化

## 各選択肢の詳細分析

各選択肢のアプローチと特性を分析し、CogitoWeave の思考支援要件への適合性を評価する。

### D3

SVG ベースのデータドリブン可視化ライブラリ。force simulation による物理シミュレーション機能を内蔵し、ネットワーク図の動的配置に最適化されている。

- 利点
  - force simulation による概念間関係の自然な配置が実現できる
  - SVG ベースで軽量、WebGL に比べて描画負荷が低い
  - 豊富なドキュメントとコミュニティ、ネットワーク図の実装例が多数存在する
  - 細粒度の制御が可能で、概念クラスタの境界表示など複雑な要件にも対応できる
  - Solid 等のフレームワークと組み合わせやすい設計である
- 欠点
  - 学習曲線が比較的急峻で、force simulation の物理パラメータ調整にコツが必要
  - SVG の性能制限により、非常に大規模なデータ(数万ノード)では処理が重くなる可能性がある

### Three.js

WebGL ベースの 3D 可視化ライブラリ。高性能な GPU レンダリングにより、大規模データの可視化に優れている。

- 利点
  - WebGL による高性能レンダリングで大規模データに対応できる
  - 3D 空間での概念配置により、より多くの関係性を表現可能
  - アニメーション・エフェクトが豊富で視覚的インパクトが高い
- 欠点
  - 3D UI の複雑性により、思考支援ツールとして直感性が低下する
  - WebGL の学習・デバッグが困難で、一人開発制約に不適合
  - シンプルな 2D 関係性表現には過剰なスペックとなる
  - モバイル環境での WebGL 対応に課題がある

### Chart.js

Canvas API ベースの軽量チャートライブラリ。設定ベースのアプローチで基本的なグラフを簡単に作成できる。

- 利点
  - 軽量で習得が容易、設定ベースのシンプルな実装
  - 一般的なチャート形式に対する豊富なテンプレート
  - パフォーマンスが良く、軽快な動作が期待できる
- 欠点
  - ネットワーク図・力学シミュレーションに対応していない
  - 概念間の動的関係性表現が困難
  - ドラッグ&ドロップによる空間配置機能が実装できない
  - 固定的なチャート形式に制限され、自由な可視化設計ができない

## 判断基準による評価

### 概念間関係の表現能力の比較

D3 の force simulation が概念間関係の表現に最も適している。物理シミュレーションにより概念の自然な配置が実現でき、関連の強さを距離で表現できる。Three.js は 3D 表現により情報量は多いが、思考支援における直感性が劣る。Chart.js はネットワーク図に対応しておらず、要件を満たさない。

### Solid との統合性の比較

D3 は DOM ベースの操作により、Solid のリアクティブシステムと Virtual DOM を組み合わせやすい。Three.js は Canvas ベースのため、Solid のメリットを活かしにくく、統合が複雑になる。Chart.js は設定ベースであり Solid との統合は比較的容易だが、機能制限により選択肢から除外される。

### インタラクティブ性の比較

D3 は豊富なイベント処理とドラッグ&ドロップ機能により、概念の自由な操作を実現できる。Three.js もインタラクティブ性は高いが、3D 操作の複雑性により学習負荷が高い。Chart.js は限定的なインタラクション機能のみで、自由な空間配置操作に対応できない。

## 最終選択と根拠

### 選択結果

<!-- GLOBAL_CONCLUSION_BEGIN: graph-visualization-selection -->

グラフ可視化ライブラリとして D3 を採用する。

<!-- GLOBAL_CONCLUSION_END: graph-visualization-selection -->

### 選択根拠

force simulation による概念間関係の自然な表現、SVG ベースの軽量性、Solid との良好な統合性、豊富なインタラクティブ機能により、CogitoWeave の空間配置要件を最適に満たす。Three.js の 3D 機能は思考支援において過剰で複雑性を増し、Chart.js はネットワーク図要件を満たさないため、D3 が唯一の実用的選択となる。
