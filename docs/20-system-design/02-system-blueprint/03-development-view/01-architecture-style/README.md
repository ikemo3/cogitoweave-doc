---
doc_type: "pattern-logic"
status: "draft"
depends:
  contracts:
    - "problem-statement"
    - "solution-approach"
    - "platform-constraints"
    - "bootstrap-development-approach"
  produces:
    - "architecture-style"
---

# アーキテクチャスタイル

## 前提

CogitoWeave システムの要件・制約に基づき、システム全体構造を決定するアーキテクチャスタイルを選択する。Development View の段階的制約において、要求を満たすためには特定スタイルでないと困難な場合を最初に振り分ける必要がある。

### 既存決定事項

<!-- PREMISE_BEGIN: problem-statement -->

1. **思考の体系化**: 断片的な思考を価値ある知識体系に発展させる仕組みの欠如
2. **継続的な成長**: 一度作った知識を継続的に育て、深化させる仕組みの必要性
3. **意味的関係性の可視化**: 複雑な関係性を直感的に管理できるインターフェースの重要性
4. **効率性と個性の両立**: ゼロからの知識構築は困難だが、完全自動化では個人の視点が失われる

<!-- PREMISE_END: problem-statement -->

<!-- PREMISE_BEGIN: solution-approach -->

- **概念中心設計**: 小さな思想家の思考の最小単位である概念を軸とした知識構築
- **段階的知識深化**: 概念に文献メモを積み重ね、永続メモとして深化させるプロセスを支援
- **視覚的・空間的アプローチ**: 複雑な関係性の直感的理解・管理による思考地図提供
- **LLM 協働**: 「LLM に作らせて、ツッコミを入れる」効率的な個性発揮の実現

<!-- PREMISE_END: solution-approach -->

<!-- PREMISE_BEGIN: platform-constraints -->

1. **Mac 環境制約**: Chrome 上で情報整理機能が完全動作すること
2. **iPhone 環境制約**: Safari 上で情報参照機能が基本動作すること
3. **Web 標準採用基準**: Baseline Newly available を技術選択の判断基準とすること
4. **マルチデバイス前提**: Web 技術による複数デバイス間データ共有を前提とすること

これ以外の基本セキュリティ対策（HTTPS、SQLi/XSS 対策等）、現代 Web 標準性能要件、個人情報保護法等の法規制遵守、個人環境限定によるセキュリティリスク軽減は現代 Web 開発標準に準拠する。

<!-- PREMISE_END: platform-constraints -->

<!-- PREMISE_BEGIN: bootstrap-development-approach -->

- CogitoWeave の設計書作成プロセスは、完成前から思考支援効果を提供する。
  - Bootstrap 的開発により、開発プロセス自体がプロダクト価値となるため。
- 開発プロセスと改善プロセスが継続的に最適化される。
  - ツールを使いながら改善する循環により、プロセス品質が向上し続けるため。
- 思考支援ツール制作を通じて、開発者のメタ認知能力が向上する。
  - 思考プロセスを意識化・体系化する経験により、思考能力そのものが強化されるため。

<!-- PREMISE_END: bootstrap-development-approach -->

## 論理

### アーキテクチャスタイル選択基準

CogitoWeave の特徴的要件:

1. **視覚的・空間的 UI 重視**: 複雑な関係性の直感的操作が必要だが、大規模分散処理は不要
2. **一人開発・リソース制約**: シンプルで管理しやすい構造が必要
3. **LLM 協働機能**: 外部 API 統合が重要だが、マイクロサービス級の複雑性は不要
4. **Bootstrap 的開発**: 段階的に機能追加できる構造が必要

### スタイル比較

- **スペースベースアーキテクチャ**: 大規模リアルタイム処理向け → 要件に該当せず
- **マイクロサービスアーキテクチャ**: 大規模チーム・分散システム向け → 一人開発には複雑すぎる
- **イベント駆動アーキテクチャ**: 非同期・リアルタイム重視 → UI 操作の即座反応には不適
- **サービスベースアーキテクチャ**: 中規模分散システム → 一人開発には複雑
- **レイヤードアーキテクチャ**: シンプル・段階的開発・理解しやすい → 要件に適合

## 結論

<!-- FOUNDATION_BEGIN: architecture-style -->

**レイヤードアーキテクチャ**を採用する。

<!-- FOUNDATION_END: architecture-style -->

### 選択理由

1. **開発効率**: 一人開発・限られたリソースに適したシンプルな構造
2. **段階的開発**: Bootstrap 的開発プロセスに適合した段階的機能追加が容易
3. **理解容易性**: 管理・保守が一人で可能な複雑度
4. **外部統合**: LLM API 統合が層の責務分離で明確化

### 制約への適合性

- 一人開発・リソース制約 → シンプル構造で管理負荷軽減
- 視覚的 UI 要件 → プレゼンテーション層での複雑 UI 実装に対応
- LLM 協働 → 外部サービス層での API 統合が明確
- Bootstrap 開発 → 層単位での段階的実装が可能
