---
doc_type: "pattern-choice"
status: "draft"
depends:
  contracts: []
  produces: []
---

# グラフライブラリ選択

## 前提条件とスコープ

この設計判断は [01-approach-selection.md](01-approach-selection.md) により Vanilla JavaScript 採用が確定していることを前提とする。CogitoWeave の概念間関係グラフ可視化機能の実装において、インタラクティブ性・パフォーマンス・学習コスト・保守性を重視する。

## 設計判断の論理

第一に、CogitoWeave のグラフ可視化要求を分析した結果、概念間関係の動的表示・ノード間の距離表現・インタラクティブな操作（ズーム・パン・ノード選択）が必要であることが明確になった。個人用途での数千ノード程度の規模で、リアルタイムな関係探索が重要である。

第二に、JavaScript グラフライブラリとして以下の3つの選択肢を比較検討した。

### 選択肢A: D3.js

- 利点: 高度なカスタマイズ性、豊富な可視化機能、Force Layout サポート、大規模コミュニティ
- 欠点: 学習コスト高、実装工数大、低レベルAPI、グラフ特化ではない汎用ライブラリ

### 選択肢B: Sigma.js

- 利点: グラフ可視化特化、高性能、WebGL対応、モダンなAPI、アクティブメンテナンス
- 欠点: D3.js比較でのエコシステム規模、学習リソース限定

### 選択肢C: Cytoscape.js

- 利点: グラフ理論特化、豊富なレイアウトアルゴリズム、拡張性、科学的可視化に適合
- 欠点: 複雑なAPI、学習コスト中程度、個人用途に対する過剰仕様

第三に、CogitoWeave の具体的開発要求との適合性を評価した。プロトタイプ開発では迅速な実装と視覚的なフィードバックが重要であり、**LLM による自動コード生成**が開発効率に直結する。

D3.js は最高の柔軟性と豊富な学習データを提供しており、LLM が Force Layout・ズーム・パン・インタラクション機能を含む完全なグラフ可視化コードを生成できる。大量のサンプルコード・Stack Overflow・GitHub リポジトリにより、LLM の D3.js 知識は極めて豊富である。

Sigma.js や Cytoscape.js は優秀なライブラリだが、LLM の学習データにおける露出度が D3.js と比較して限定的であり、複雑な実装要求に対する自動コード生成の精度で劣る可能性がある。

個人プロジェクトにおいて、開発者の学習コストよりも **LLM のコード生成能力** を活用した迅速なプロトタイプ開発が優先される。

## 結論

**選択肢A: D3.js** を採用する。

LLM による豊富なコード生成能力、最高の柔軟性とカスタマイズ性、大規模コミュニティサポートにより、CogitoWeave のプロトタイプ開発に最適である。LLM が Force Layout・インタラクション・アニメーション機能を含む高品質なグラフ可視化コードを自動生成できる。
