---
doc_type: "pattern-elaboration"
status: "draft"
depends:
  contracts: []
  produces:
    - "process-view"
---

# Process View

## 前提

- システムの実行時の動的な側面を定義する。
- 並行性、通信、スループットに関心を持つ。

## 論理

- **主語（誰の視点）**: 実行時のシステム
- **時間（いつの話）**: 実行時
- **関心（何を示す）**: 並行性・通信・スループット（どう動く）
- **代表アウトプット**: シーケンス図、メッセージフロー、スレッド/ワーカー/キュー設計

## 処理フロー

## 定義対象

<!-- FOUNDATION_BEGIN: process-view -->

- 実行時フロー
- 一貫性/整合
- 並行性設計
- 同期メカニズム設計
- 信頼性と制御
- 性能設計
- 観測性（ログ、メトリクス、トレース）

<!-- FOUNDATION_END: process-view -->

## ステップ1: 実行時フロー

まず実行時フローを確定する。どのコンポーネントがいつ誰に何を渡すか、その因果関係を明らかにすることで、次に整合性の境界を定義できる。

## ステップ2: 一貫性/整合

実行時フローを前提に、どの単位で強整合を採り、どの単位で最終整合にするかを決める。これにより並行度の設計範囲が決まる。

## ステップ3: 並行性設計

整合性の境界を前提に、並列処理できる部分と排他制御が必要な部分を設計する。これにより必要な同期メカニズムの候補が定まる。

## ステップ4: 同期メカニズム設計

並行性の設計を前提に、具体的な同期手段（ロック、キュー、メッセージングなど）を選ぶ。これが信頼性制御の前提となる。

## ステップ5: 信頼性と制御

同期メカニズムを前提に、失敗や遅延への制御手段（タイムアウト、リトライ、バックプレッシャ、回路遮断）を設計する。これにより性能への影響も見積もれる。

## ステップ6: 性能設計

信頼性制御を前提に、スループットやレイテンシの目標を具体化し、キャッシュや並列度の調整を行う。これにより観測すべき対象が決まる。

## ステップ7: 観測性（ログ、メトリクス、トレース）

性能設計を前提に、どこを測定・監視するかを定める。ログ、メトリクス、トレースの観測点を設計し、全体の妥当性を検証できるようにする。
