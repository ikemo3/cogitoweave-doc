---
doc_type: "pattern-logic"
status: "draft"
depends:
  contracts: []
  produces: []
---

# 概念グループ作成API (Command)

## 前提

CogitoWeaveシステムでは概念グループがユーザーが手動で作成・命名するグループを管理するエンティティである。概念グループは複数の概念と多対多の関係を持ち、概念の集合に意味を与える。

概念グループ作成は概念関係性構築ワークフローでグループ名・説明入力機能の後に実行される。空間配置で形成されたクラスタに名前と説明を付与して永続化する責務を持つ。

概念グループ作成はCommandパターンに従うデータ変更操作として、概念グループエンティティをシステムに追加する。

## 論理

### API呼び出し方向

```text
UI → GroupService.createConceptGroup(C)
```

**役割名ベース**: GroupServiceが概念グループ管理の責務を担当

### 入力項目 (概念レベル)

- **グループ名**: ユーザーが定義したグループの名称
- **グループ説明**: グループの意味や目的の説明文
- **概念IDリスト**: グループに所属する概念の識別子集合
- **作成日時**: グループ作成の日時

### 出力項目 (概念レベル)

- **グループID**: 作成された概念グループの一意識別子
- **作成結果**: グループ作成の成功・失敗状態
- **グループ情報**: 作成された概念グループの基本情報

### エラー項目 (概念レベル)

- **概念存在エラー**: 指定された概念IDのいずれかが存在しない場合
- **重複エラー**: 同名のグループが既に存在する場合
- **空グループエラー**: 概念IDリストが空の場合
- **システムエラー**: データ保存失敗等の内部エラー

### CQRS分類

**Command**: データ変更を伴う操作 - 新規概念グループエンティティの作成

## 結論

概念グループ作成APIは新規概念グループエンティティの作成を担当するCommand操作として、グループ名・説明と所属概念リストを入力とし、作成されたグループ情報を返す。

エラーハンドリングでは概念の存在確認とグループの妥当性検証を行い、適切なエラー情報を提供する。このAPIは概念関係性構築ワークフローの中核機能として、概念の意味的集合を管理する役割を担う。
