---
doc_type: "pattern-logic"
status: "draft"
depends:
  contracts: []
  produces: []
---

# 外部記事取得API (Query)

## 前提

CogitoWeaveシステムでは外部記事取得が指定されたURLから記事内容を取得・解析するための参照操作である。外部記事取得は文献読み込みワークフローの初期段階で使用される。

外部記事取得はURLを指定して実行され、記事のタイトル・本文・メタデータを解析して返す責務を持つ。これは外部システムとの境界越えポイントである。

外部記事取得はQueryパターンに従う外部データ参照操作として、外部記事の内容を取得する。

## 論理

### API呼び出し方向

```text
UI → ExternalArticleService.fetchArticle(Q)
```

**役割名ベース**: ExternalArticleServiceが外部記事取得の責務を担当

### 入力項目 (概念レベル)

- **記事URL**: 取得対象の外部記事のURL
- **取得オプション**: 画像取得・リンク解析等の詳細設定
- **タイムアウト**: 記事取得の制限時間
- **ユーザーエージェント**: 記事取得時のUA設定

### 出力項目 (概念レベル)

- **記事タイトル**: 解析された記事のタイトル
- **記事本文**: クリーニング済みの記事本文
- **記事メタデータ**: 著者・公開日・サイト名等の情報
- **取得状態**: 取得の成功・失敗・部分成功の状態

### エラー項目 (概念レベル)

- **URL到達エラー**: URLにアクセスできない・存在しない場合
- **解析エラー**: 記事内容の解析に失敗した場合
- **タイムアウトエラー**: 指定時間内に取得が完了しない場合
- **フォーマットエラー**: サポートされていないページ形式の場合

### CQRS分類

**Query**: データ参照のみの操作 - 外部記事コンテンツの取得

## 結論

外部記事取得APIは外部記事コンテンツの取得を担当するQuery操作として、記事URLを入力とし、解析済みの記事情報を返す。

エラーハンドリングではURL検証・取得可能性・解析妥当性を確認し、適切なエラー情報を提供する。このAPIは文献読み込みワークフローの起点機能として、外部知識の取り込みを実現する役割を担う。
