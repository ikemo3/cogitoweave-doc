---
doc_type: "pattern-logic"
status: "draft"
depends:
  contracts: []
  produces: []
---

# 概念作成API (Command)

## 前提

CogitoWeaveシステムでは概念がシステムの中核となる知識単位として機能する。概念は文献メモ、概念関連、概念グループと関係を持つデータエンティティである。

概念作成は以下の場面で必要となる：

- 文献読み込みワークフロー：概念選択時に既存概念が見つからない場合
- 概念関係性構築ワークフロー：関係を作る過程で新概念が必要になる場合

新規概念作成はCommandパターンに従うデータ変更操作として、概念エンティティをシステムに追加する責務を持つ。

## 論理

### API呼び出し方向

```text
UI → ConceptService.createConcept(C)
```

**役割名ベース**: ConceptServiceが概念管理の責務を担当

### 入力項目 (概念レベル)

- **概念名**: 作成する概念の名称
- **関連概念リスト**: 新規概念に関連付ける既存概念の集合
- **説明**: 概念の説明文 (オプション)

### 出力項目 (概念レベル)

- **概念ID**: 作成された概念の一意識別子
- **作成結果**: 概念作成の成功・失敗状態
- **概念情報**: 作成された概念の基本情報

### エラー項目 (概念レベル)

- **重複エラー**: 同名概念が既に存在する場合
- **関連概念エラー**: 指定された関連概念が存在しない場合
- **入力検証エラー**: 概念名の形式不正等
- **システムエラー**: データ保存失敗等の内部エラー

### CQRS分類

**Command**: データ変更を伴う操作 - 新規概念エンティティの作成

## 結論

概念作成APIは新規概念エンティティの作成を担当するCommand操作として、概念名と関連概念を入力とし、作成された概念情報を返す。

エラーハンドリングでは重複チェックと関連概念の存在確認を行い、適切なエラー情報を提供する。このAPIは概念作成サブワークフローの中核機能として、複数のメインワークフローから呼び出される共通機能である。
