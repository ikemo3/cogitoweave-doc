---
doc_type: "pattern-logic"
status: "draft"
depends:
  contracts: []
  produces: []
---

# 文献メモ一覧取得API (Query)

## 前提

CogitoWeaveシステムでは文献メモ一覧取得が特定の概念に紐付く文献メモの一覧を取得するための参照操作である。文献メモ一覧取得は質問探索・概念発見ワークフローで使用される。

文献メモ一覧取得は概念IDを指定して実行され、その概念に関連付けられた文献メモの一覧を返す責務を持つ。

文献メモ一覧取得はQueryパターンに従うデータ参照操作として、既存文献メモエンティティの一覧を取得する。

## 論理

### API呼び出し方向

```text
UI → MemoService.getMemosByConceptId(Q)
```

**役割名ベース**: MemoServiceが文献メモ管理の責務を担当

### 入力項目 (概念レベル)

- **概念ID**: 文献メモを取得する概念の一意識別子
- **取得件数**: 返却するメモの最大件数
- **ソート条件**: 結果の並び順（作成日順・更新日順等）
- **フィルタ条件**: 期間指定・文献種別等の絞り込み条件

### 出力項目 (概念レベル)

- **文献メモリスト**: 指定概念に紐付く文献メモの一覧
- **各メモ情報**: メモID・メモ概要・文献タイトル・作成日時
- **文献情報**: 関連する文献の基本情報
- **メモ総数**: 該当する文献メモの総件数

### エラー項目 (概念レベル)

- **概念不存在エラー**: 指定された概念IDが存在しない場合
- **フィルタ条件エラー**: 不正なフィルタ条件が指定された場合
- **システムエラー**: データベース接続失敗等の内部エラー

### CQRS分類

**Query**: データ参照のみの操作 - 既存文献メモエンティティの一覧取得

## 結論

文献メモ一覧取得APIは既存文献メモエンティティの一覧取得を担当するQuery操作として、概念IDを入力とし、関連する文献メモリストを返す。

エラーハンドリングでは概念の存在確認とフィルタ条件の妥当性を確認し、適切なエラー情報を提供する。このAPIは文献メモ一覧表示機能の基盤として、概念に蓄積された知識の可視化を支援する役割を担う。
