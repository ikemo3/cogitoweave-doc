---
doc_type: "pattern-logic"
status: "draft"
depends:
  contracts: []
  produces: []
---

# 文献作成API (Command)

## 前提

CogitoWeaveシステムでは文献が外部情報源の書誌情報を管理するエンティティである。文献は複数の文献メモを生成する基礎となるデータである。

文献作成は文献読み込みワークフローで外部記事取得・解析処理の後に実行される。記事のURL、タイトル、内容等の書誌情報をシステムに保存する責務を持つ。

新規文献作成はCommandパターンに従うデータ変更操作として、文献エンティティをシステムに追加する。

## 論理

### API呼び出し方向

```text
UI → LiteratureService.createLiterature(C)
```

**役割名ベース**: LiteratureServiceが文献管理の責務を担当

### 入力項目 (概念レベル)

- **文献URL**: 外部記事のURL
- **文献タイトル**: 取得した記事のタイトル
- **文献内容**: 解析済みの記事本文
- **取得日時**: 記事を取得した日時

### 出力項目 (概念レベル)

- **文献ID**: 作成された文献の一意識別子
- **作成結果**: 文献作成の成功・失敗状態
- **文献情報**: 作成された文献の基本情報

### エラー項目 (概念レベル)

- **重複エラー**: 同一URLの文献が既に存在する場合
- **URL検証エラー**: URLの形式不正や到達不可能
- **内容解析エラー**: 記事内容の解析失敗
- **システムエラー**: データ保存失敗等の内部エラー

### CQRS分類

**Command**: データ変更を伴う操作 - 新規文献エンティティの作成

## 結論

文献作成APIは新規文献エンティティの作成を担当するCommand操作として、外部記事の書誌情報を入力とし、作成された文献情報を返す。

エラーハンドリングではURL重複チェックと内容解析の検証を行い、適切なエラー情報を提供する。このAPIは文献読み込みワークフローの基盤機能として、外部記事の情報を永続化する役割を担う。
