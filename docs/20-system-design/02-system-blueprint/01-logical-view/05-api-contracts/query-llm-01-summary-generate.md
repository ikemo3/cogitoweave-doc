---
doc_type: "pattern-logic"
status: "draft"
depends:
  contracts: []
  produces: []
---

# LLM要約生成API (Query)

## 前提

CogitoWeaveシステムではLLM要約生成が選択した概念の観点で記事内容を要約するための参照操作である。LLM要約生成は文献読み込みワークフローで概念選択後に使用される。

LLM要約生成は概念情報と記事内容を指定して実行され、概念の観点に基づいた要約文を生成して返す責務を持つ。これは外部LLMサービスとの境界越えポイントである。

LLM要約生成はQueryパターンに従う外部AI参照操作として、観点別要約コンテンツを生成する。

## 論理

### API呼び出し方向

```text
UI → LLMService.generateSummary(Q)
```

**役割名ベース**: LLMServiceがLLM処理の責務を担当

### 入力項目 (概念レベル)

- **概念情報**: 要約観点となる概念の名称・説明
- **記事内容**: 要約対象の記事本文
- **要約長**: 出力する要約の目安長度
- **要約スタイル**: 要約の形式（箇条書き・段落形式等）

### 出力項目 (概念レベル)

- **要約文**: 概念観点に基づいて生成された要約内容
- **要約品質**: 生成された要約の信頼度・妥当性スコア
- **使用トークン数**: LLM処理で消費されたトークン量
- **生成状態**: 要約生成の成功・失敗・部分成功の状態

### エラー項目 (概念レベル)

- **LLMサービスエラー**: 外部LLMサービスの接続・実行失敗
- **入力長制限エラー**: 記事内容がLLMの処理限界を超える場合
- **品質不良エラー**: 生成された要約の品質が基準を下回る場合
- **レート制限エラー**: LLMサービスの利用制限に達した場合

### CQRS分類

**Query**: データ参照のみの操作 - LLMによる要約コンテンツの生成

## 結論

LLM要約生成APIはLLMによる要約コンテンツの生成を担当するQuery操作として、概念情報と記事内容を入力とし、観点別要約文を返す。

エラーハンドリングではLLMサービスの状態・入力制限・出力品質を確認し、適切なエラー情報を提供する。このAPIは文献読み込みワークフローの中核機能として、概念に基づく知識変換を実現する役割を担う。
