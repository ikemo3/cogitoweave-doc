---
doc_type: "pattern-logic"
status: "draft"
depends:
  contracts: []
  produces: []
---

# 概念検索API (Query)

## 前提

CogitoWeaveシステムでは概念検索が既存の概念を見つけるための参照操作である。概念検索は文献読み込みワークフローと概念関係性構築ワークフローで共通して使用される。

概念検索は概念選択インターフェースで実行され、ユーザーが入力した検索条件に基づいて適合する概念の一覧を返す責務を持つ。

概念検索はQueryパターンに従うデータ参照操作として、既存概念エンティティを検索する。

## 論理

### API呼び出し方向

```text
UI → ConceptService.searchConcepts(Q)
```

**役割名ベース**: ConceptServiceが概念管理の責務を担当

### 入力項目 (概念レベル)

- **検索キーワード**: 概念名や説明文の部分一致検索用キーワード
- **検索オプション**: 完全一致・部分一致・あいまい検索等の検索方式
- **取得件数**: 返却する概念の最大件数
- **ソート条件**: 結果の並び順（名前順・作成日順等）

### 出力項目 (概念レベル)

- **概念リスト**: 検索条件に一致した概念の一覧
- **各概念情報**: 概念ID・概念名・説明・作成日時
- **検索結果数**: 一致した概念の総数
- **検索状態**: 検索の成功・失敗状態

### エラー項目 (概念レベル)

- **検索条件エラー**: 検索キーワードの形式不正や不正な条件
- **パフォーマンスエラー**: 検索結果が多すぎる場合の制限エラー
- **システムエラー**: データベース接続失敗等の内部エラー

### CQRS分類

**Query**: データ参照のみの操作 - 既存概念エンティティの検索

## 結論

概念検索APIは既存概念エンティティの検索を担当するQuery操作として、検索条件を入力とし、一致する概念リストを返す。

エラーハンドリングでは検索条件の妥当性とパフォーマンス制限を確認し、適切なエラー情報を提供する。このAPIは概念選択インターフェースの中核機能として、複数のワークフローで概念発見を支援する役割を担う。
