---
doc_type: "pattern-logic"
status: "draft"
depends:
  contracts: []
  produces: []
---

# 互換性 (Compatibility)

## 前提

- [品質属性とトレードオフ](README.md)で定義された品質特性の分析
- システムの他システムとの共存・連携に関する要件の評価

## 論理

互換性とは、同じハードウェア環境またはソフトウェア環境を共有しながら、他のソフトウェア製品と情報を交換し、必要な機能を実行できるソフトウェア製品の度合いを表す。

### 期待する性質

- 共存性: 他の製品と共通の環境及び資源を共有しながら、悪影響を与えることなく、必要な機能を効率的に実行できる度合い
- 相互運用性: 2つ以上のシステム、製品又は構成要素が情報を交換し、その情報を使用できる度合い

### 優先度

- 高（High）。Mac Chromeでの全機能、iPhone Safariでの基本機能動作が Why 系の外部制約。
- Web Baseline Newly available を採用基準とし、Progressive Enhancement を徹底。

### トレードオフ相手

- 性能: Polyfill/フォールバックはサイズ増加・実行コストを招く。
- 機能適合性: 新API活用を抑えると表現力が落ちる場合がある。
- 保守性: 互換レイヤーの維持は変更コストを上げる。

### 論理的影響

- 機能検出（Feature Detection）で分岐。UA 判定は採用しない。
- ES Modules/CSS カスタムプロパティ等の標準機能を優先し、ベンダ固有APIは回避。
- 入力系は標準フォーム＋アクセシビリティ属性。ジェスチャ依存の操作にはキーボード代替を用意。
- サーバAPIはHTTP/JSONのRESTを維持し、CORSは自ドメインに限定。

### 判断

- 対応: macOS Chrome 最新（フル）/ iOS Safari 最新（閲覧・基本操作）。
- 初期は Service Worker 不採用（互換テスト負荷削減）。将来の閲覧最適化で検討。
- 非対応機能はフォールバック（CSS視覚効果の簡素化など）。

### 備考

- 互換性はE2Eスモークで主要経路（URL入力→要約→保存→表示）を検証。
- 既知の制約はリリースノートに明記し透明化。

## 結論

標準機能を基盤に Progressive Enhancement で適合性を確保する。対象ブラウザを限定しつつ基本操作の連続性を優先する。
